### 기능 기획 문서: 협동 레이드 시스템

#### 1. 기능 개요
* **목표:** 동아리원들이 협력하여 해결하는 고난도, 시나리오 기반의 보안 문제를 제공한다.
* **기능:** 레이드 진행 상태 추적, 단계별 문제 해결, 팀별 기여도 기반 보상.

#### 2. 필요 기술 스택
* **백엔드:** 레이드 상태(시작/종료, 단계 진행도)를 관리하는 로직.
* **데이터베이스:** 레이드 정보, 참가자 명단 및 기여도 저장.
* **Docker:** 각 레이드 시나리오를 위한 복합적인 환경 구성.

---

#### 3. 세부 기능 목록
* **레이드 시작 및 관리**:
    * 관리자가 특정 기간 동안 레이드를 시작하고 종료할 수 있는 기능을 제공한다.
    * 마을 중앙 광장 같은 특별한 장소에 레이드 참여 입구를 만든다.
* **단계별 문제 진행**:
    * 레이드는 여러 개의 문제로 구성된 시나리오로 진행된다. (예: 1단계: 웹 서버 해킹 → 2단계: 데이터베이스 침투 → 3단계: 악성코드 분석)
    * 한 단계의 문제가 해결되면 다음 단계가 자동으로 열리고, 모든 동아리원이 다음 단계로 넘어갈 수 있다.
* **진행 상황 공유**:
    * 레이드 전용 UI를 만들어 현재 진행 중인 단계, 참여자들의 기여도, 남은 시간 등을 실시간으로 보여준다.
    * 마을 NPC가 레이드 진행 상황에 대한 힌트를 주거나 코멘트를 남기는 재미 요소를 추가할 수 있다.
* **기여도 기반 보상**:
    * 각 단계의 문제를 해결할 때마다 참가자들에게 점수를 부여한다.
    * 레이드 종료 시, 개인별로 획득한 점수에 따라 차등적으로 경험치와 희귀 아이템을 지급한다.

---

#### 4. DB 모델링
* **`raids` (레이드 정보) 테이블**
    | 필드명 | 데이터 타입 | 설명 |
    | :--- | :--- | :--- |
    | `id` | `INT` | 레이드 고유 번호 (Primary Key) |
    | `title` | `VARCHAR` | 레이드 제목 |
    | `description` | `TEXT` | 레이드 시나리오 설명 |
    | `status` | `VARCHAR` | 상태 (`ready`, `active`, `completed`) |
    | `current_stage` | `INT` | 현재 진행 단계 |
    | `start_time` | `TIMESTAMP` | 시작 시간 |
    | `end_time` | `TIMESTAMP` | 종료 시간 |

* **`raid_participants` (레이드 참가자) 테이블**
    | 필드명 | 데이터 타입 | 설명 |
    | :--- | :--- | :--- |
    | `id` | `INT` | 고유 번호 (Primary Key) |
    | `user_id` | `INT` | 참가자 ID (Foreign Key) |
    | `raid_id` | `INT` | 레이드 ID (Foreign Key) |
    | `contribution_score` | `INT` | 기여 점수 |

#### 5. API 설계
* `GET /api/raid/status`: 현재 진행 중인 레이드의 상태를 확인한다.
* `POST /api/raid/join`: 레이드에 참가한다.
* `POST /api/raid/:stage_id/submit`: 특정 단계의 정답을 제출한다.
* `GET /api/raid/:id/leaderboard`: 레이드 종료 후 기여도 순위를 확인한다.

레이드 시나리오 예시: '마을 병원 해킹 방어전'
1단계: 침투 경로 확보 - 병원의 시스템에 접근할 수 있는 초기 침투 지점(웹 페이지 취약점, 피싱 이메일 등)을 찾아낸다.

2단계: 내부망 정찰 - 침투에 성공한 후, 내부망을 스캔하며 중요한 정보가 있는 서버를 찾아낸다.

3단계: 데이터 탈취 - 의료 정보가 담긴 데이터베이스 서버에 접근해 취약점을 공략하고, 데이터를 획득한다.

최종 단계: 방어 보고서 작성 - 발견한 모든 취약점과 공격 루트를 정리하여 '병원에 제출할 보고서'를 작성한다.

이런 식으로 시나리오를 구성하면, 각 단계가 기존 워게임의 한 문제 역할을 하게 되면서 전체적인 스토리 라인이 완성됩니다. 아주 좋은 방향입니다.