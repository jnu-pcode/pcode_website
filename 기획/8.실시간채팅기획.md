### 기능 기획 문서: 실시간 채팅

#### 1. 기능 개요
* **목표:** 마을 내에서 동아리원들이 실시간으로 대화하며 소통할 수 있는 환경을 제공한다.
* **기능:** 아바타와 연동된 실시간 채팅, 메시지 송수신.

#### 2. 필요 기술 스택
* **백엔드:** 실시간 양방향 통신을 위한 기술. **웹소켓(WebSocket)**을 이용하면 가장 효율적입니다. Node.js 환경에서는 **Socket.IO** 같은 라이브러리를 활용하면 쉽게 구현할 수 있습니다.
* **프론트엔드:** 실시간으로 메시지를 수신하고 화면에 표시하는 UI.

---

#### 3. 세부 기능 목록
* **메시지 송수신:**
    * 사용자가 채팅창에 메시지를 입력하면, 실시간으로 다른 동아리원에게 전송된다.
    * 모든 메시지는 서버를 통해 중계된다.
* **아바타 연동:**
    * 마을 지도에서 메시지가 **말풍선 형태로** 아바타 머리 위에 나타나도록 구현하여 시각적인 재미를 더한다.
    * 일정 시간이 지나면 말풍선이 사라지게 한다.
* **접근성:**
    * 채팅창은 항상 화면 하단에 고정되어 있도록 하여 언제든 대화에 참여할 수 있게 한다.
    * 다른 동아리원이 접속하거나, 접속을 종료할 때 메시지로 알림을 보낸다.

---

#### 4. DB 모델링
* **`messages` (채팅 메시지) 테이블 추가**
    * MVP 단계에서는 채팅 기록을 굳이 저장할 필요는 없을 수 있습니다. 하지만 나중에 메시지 기록을 남기고 싶다면 다음과 같이 테이블을 구성할 수 있습니다.

| 필드명 | 데이터 타입 | 설명 |
| :--- | :--- | :--- |
| `id` | `INT` | 메시지 고유 번호 (Primary Key) |
| `user_id` | `INT` | 메시지 작성자 ID |
| `content` | `TEXT` | 메시지 내용 |
| `timestamp` | `TIMESTAMP` | 전송 시간 |

#### 5. API 설계
* **WebSocket Endpoint:**
    * `ws://pcode.com/ws/chat` 와 같은 단일 엔드포인트를 통해 모든 채팅 관련 통신을 처리한다.
    * 클라이언트에서 'send_message', 'join_chat' 등 이벤트를 보내고 서버에서 이를 처리한다.
